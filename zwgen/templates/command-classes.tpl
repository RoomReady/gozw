// THIS FILE IS AUTO-GENERATED BY CCGEN
// DO NOT MODIFY

package commandclass

type ID byte

const (
  {{range .CommandClasses}}
  {{.GetConstName}} ID = {{.Key}}{{end}}
)

func (c ID) String() string {
  switch c {
    {{range .CommandClasses}}
    {{if eq .Version 1}}
    case {{.GetConstName}}:
      return "{{.Help}}"
    {{end}}
    {{end}}
    default:
      return fmt.Sprintf("Unknown (0x%X)", byte(c))
  }
}

func Parse(ccVersion uint8, payload []byte) (interface{}, error) {
  switch {
    {{range $_, $cc := .CommandClasses}}{{if .CanGen}}{{if .Enabled}}{{$version := .Version}}
    case payload[0] == byte({{.GetConstName}}) && ccVersion == {{$version}}:
      switch payload[1] {
        {{range .Commands}}case {{.Key}}:
          command := {{$cc.GetPackageName}}.{{(.GetStructName $cc)}}{}
          if err := command.UnmarshalBinary(payload); err != nil {
            return nil, err
          }
          return command, nil
        {{end}}default:
          return nil, errors.New("Unknown command in command class {{.Help}}")
      }
    {{end}}{{end}}{{end}}

    default:
      return nil, errors.New("Unknown command class")
  }
}
