package gen

import (
	"io"
)

// GenerateCommandClasses ...
func (g *Generator) GenerateCommandClasses(w io.Writer) (err error) {
	_, err = writeStrings(w,
		"// THIS FILE IS AUTO-GENERATED BY ZWGEN\n",
		"// DO NOT MODIFY\n\n",
		"package cc\n\n",
		"const (\n",
	)
	if err != nil {
		return
	}
	for _, cc := range g.zwClasses.CommandClasses {
		_, err = writeStrings(w,
			"\t", cc.GetConstName(), " CommandClassID = ", cc.Key, "\n",
		)
		if err != nil {
			return
		}
	}
	_, err = writeStrings(w,
		")\n",
		"func (c CommandClassID) String() string {\n",
		"\tswitch c {\n",
	)
	if err != nil {
		return
	}
	for _, cc := range g.zwClasses.CommandClasses {
		if cc.Version == 1 {
			_, err = writeStrings(w,
				"\tcase ", cc.GetConstName(), ":\n",
				"\t\treturn \"", cc.Help, "\"\n",
			)
			if err != nil {
				return
			}
		}
	}
	_, err = writeStrings(w, "\t}\n}\n")
	return
}
