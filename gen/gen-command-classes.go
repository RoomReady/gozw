package gen

import (
	"io"
)

// GenerateCommandClasses ...
func (g *Generator) GenerateCommandClasses(w io.Writer) (err error) {
	_, err = writeStrings(w,
		"// THIS FILE IS AUTO-GENERATED BY ZWGEN\n",
		"// DO NOT MODIFY\n\n",
		"package cc\n\n",
		"const (\n",
	)
	if err != nil {
		return
	}
	for _, cc := range g.zwClasses.CommandClasses {
		io.WriteString(w, "\t")
		io.WriteString(w, cc.GetConstName())
		io.WriteString(w, " CommandClassID = ")
		_, err = io.WriteString(w, "\n")
		if err != nil {
			return
		}
	}
	_, err = io.WriteString(w, ")\nfunc (c CommandClassID) String() string {\n\tswitch c {\n")
	if err != nil {
		return
	}
	for _, cc := range g.zwClasses.CommandClasses {
		if cc.Version == 1 {
			io.WriteString(w, "\tcase ")
			io.WriteString(w, cc.GetConstName())
			io.WriteString(w, "\t\treturn \"")
			io.WriteString(w, cc.Help)
			_, err = io.WriteString(w, "\"\n")
			if err != nil {
				return
			}
		}
	}
	_, err = io.WriteString(w, "\t}\n}\n")
	return
}
